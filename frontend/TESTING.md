# React前端功能验证清单

## 📋 启动前检查

- [ ] Node.js 版本 >= 16.0.0
  ```bash
  node --version
  ```

- [ ] npm 版本 >= 8.0.0
  ```bash
  npm --version
  ```

- [ ] 后端API服务已启动
  ```bash
  # 访问健康检查接口
  curl http://localhost:8000/api/health
  # 应返回：{"status":"healthy","agent":"TravelAssistantAgent","version":"1.0.0"}
  ```

- [ ] 配置文件已创建
  - `config/config.json` 已配置API密钥
  - `config/config.json` 中 `llm.provider_type` 已设置

---

## 🚀 启动验证

### 1. 依赖安装
```bash
cd frontend
npm install
```

**验证点：**
- [ ] 无错误提示
- [ ] `node_modules/` 目录已创建
- [ ] 安装了 react、antd、axios 等依赖

---

### 2. 开发服务器启动
```bash
npm run dev
```

**验证点：**
- [ ] 控制台显示 `Local: http://localhost:3000/`
- [ ] 无编译错误
- [ ] 浏览器自动打开或手动访问 http://localhost:3000

---

## 🧪 功能测试清单

### UI基础功能

#### 1. 页面加载
- [ ] 页面正常显示，无白屏
- [ ] 左侧侧边栏显示"会话管理"和"系统配置"两个Tab
- [ ] 右侧聊天区域显示"小帅旅游助手"标题
- [ ] 底部输入框显示"请先在左侧创建会话"提示

---

#### 2. 会话管理
- [ ] 点击"新建会话"按钮
- [ ] 会话列表中出现新会话
- [ ] 输入框变为可用状态
- [ ] 会话显示创建时间和消息数量

**多会话测试：**
- [ ] 创建多个会话
- [ ] 切换不同会话
- [ ] 每个会话的消息历史独立保存
- [ ] 删除会话后，列表更新正确

---

#### 3. 系统配置
- [ ] 切换到"系统配置"Tab
- [ ] 显示当前LLM配置信息
- [ ] 显示模型名称、温度、最大token等参数

---

### 聊天交互功能

#### 4. 基础消息发送
- [ ] 输入框中输入"你好"
- [ ] 点击"发送"按钮或按Enter键
- [ ] 用户消息立即显示在聊天区域
- [ ] 显示"🤔 正在思考中..."状态提示
- [ ] AI回复逐字流式显示
- [ ] 回复完成后显示完整消息

**验证消息格式：**
- [ ] 用户消息右对齐，蓝色背景
- [ ] AI消息左对齐，灰色背景
- [ ] 每条消息显示时间戳

---

#### 5. 流式响应测试
发送测试消息：`请详细介绍一下北京的旅游景点`

- [ ] 消息立即添加到聊天区域
- [ ] 显示思考状态
- [ ] 回复内容逐字出现（流式效果）
- [ ] 回复过程中可以看到文字逐步增加
- [ ] 完成后消息完整显示

---

#### 6. 停止控制功能
发送长文本请求：`请详细规划一个7天的环中国旅游路线，包括每天的具体安排`

- [ ] 消息发送后，输入框变为"停止"按钮
- [ ] AI开始流式回复
- [ ] 点击"停止"按钮
- [ ] 回复立即停止
- [ ] 显示"⚠️ 已停止生成"提示
- [ ] 输入框恢复可用状态

---

#### 7. Markdown渲染测试
发送消息：`请用Markdown格式列出成都的5个必去景点`

验证以下Markdown元素正确渲染：
- [ ] 标题（# ## ###）
- [ ] 列表（有序、无序）
- [ ] 粗体、斜体
- [ ] 代码块（如果AI返回）
- [ ] 链接（如果AI返回）

---

#### 8. 多轮对话测试
对话序列：
1. `推荐适合春天旅游的城市` → [ ] 收到推荐
2. `这些城市的主要景点是什么？` → [ ] 上下文连贯
3. `预算大概多少？` → [ ] 记忆前面的推荐
4. `规划一个3天的行程` → [ ] 使用前面所有信息

**验证点：**
- [ ] AI能记住之前的对话内容
- [ ] 回答具有上下文连续性
- [ ] 推荐结果符合之前的讨论

---

#### 9. 错误处理测试

**网络错误测试：**
1. 停止后端API服务
2. 发送消息
3. [ ] 显示错误提示："抱歉，出现错误：..."
4. [ ] 不会崩溃或白屏

**空消息测试：**
- [ ] 空白输入无法发送
- [ ] 发送按钮在输入为空时禁用

**会话未创建测试：**
- [ ] 删除所有会话
- [ ] 输入框显示禁用状态
- [ ] 显示"请先在左侧创建会话"提示

---

### 性能测试

#### 10. 消息历史渲染
1. 发送20条以上消息
2. [ ] 列表滚动流畅
3. [ ] 新消息自动滚动到底部
4. [ ] 消息历史完整保存

#### 11. 快速连续操作
1. 快速发送多条消息
2. [ ] UI不卡顿
3. [ ] 消息顺序正确
4. [ ] 流式响应正常

---

## 🔍 浏览器兼容性测试

### Chrome/Edge
- [ ] 所有功能正常
- [ ] UI显示正确
- [ ] 流式响应正常

### Firefox
- [ ] 所有功能正常
- [ ] UI显示正确
- [ ] 流式响应正常

### Safari（macOS）
- [ ] 所有功能正常
- [ ] UI显示正确
- [ ] 流式响应正常

---

## 📱 响应式设计测试

### 桌面端（1920x1080）
- [ ] 布局正常
- [ ] 侧边栏宽度合适
- [ ] 聊天区域充分利用空间

### 笔记本（1366x768）
- [ ] 布局正常
- [ ] 所有元素可见
- [ ] 滚动正常

### 平板（768x1024）
- [ ] 布局自适应
- [ ] 侧边栏折叠或调整
- [ ] 触摸操作友好

---

## 🐛 已知问题检查

### TypeScript错误
在运行 `npm install` 之前，TypeScript会报以下错误（**正常现象**）：
- ❌ Cannot find module 'react'
- ❌ Cannot find module 'antd'
- ❌ Cannot find module '@ant-design/icons'

**解决方法：**
```bash
npm install
```

### API代理问题
如果开发环境API请求失败：
1. 检查 `vite.config.ts` 中的代理配置
2. 确认后端运行在 `http://localhost:8000`
3. 查看浏览器Network标签，确认请求路径

---

## 📊 性能指标

### 开发环境
- [ ] 首次加载时间 < 3秒
- [ ] 消息发送响应 < 500ms
- [ ] 流式文本渲染流畅（无明显延迟）

### 生产构建
```bash
npm run build
```

- [ ] 构建成功，无错误
- [ ] `dist/` 目录已生成
- [ ] 总体积 < 2MB（gzip压缩后）

---

## ✅ 完整功能验证通过标准

所有以下功能必须正常工作：
- ✅ 会话创建、切换、删除
- ✅ 消息发送和接收
- ✅ 流式响应显示
- ✅ 停止控制
- ✅ Markdown渲染
- ✅ 多轮对话上下文
- ✅ 错误处理
- ✅ 响应式布局
- ✅ 浏览器兼容性

---

## 📝 测试报告模板

```
测试日期：____/____/____
测试人员：____________
浏览器：Chrome/Firefox/Safari ______版本

功能测试结果：
- 会话管理：✅ / ❌
- 消息发送：✅ / ❌
- 流式响应：✅ / ❌
- 停止控制：✅ / ❌
- Markdown渲染：✅ / ❌
- 多轮对话：✅ / ❌
- 错误处理：✅ / ❌

发现的问题：
1. ___________________________
2. ___________________________
3. ___________________________

性能表现：
- 首次加载：_____ 秒
- 响应速度：良好 / 一般 / 较慢

总体评价：
___________________________
___________________________
```

---

## 🎯 下一步行动

测试完成后：
1. [ ] 修复发现的问题
2. [ ] 执行生产构建测试
3. [ ] 准备部署到生产环境
4. [ ] 编写用户使用文档

---

**提示：** 如果遇到任何问题，请查看：
- 浏览器开发者工具Console标签（查看错误日志）
- 浏览器Network标签（查看API请求）
- 后端API日志（`python run_api.py` 输出）
- [DEPLOYMENT.md](./DEPLOYMENT.md) 部署文档
